<mat-card>
  <mat-card-title>{{ category.name }}</mat-card-title>
  <mat-card-subtitle>
    Budget: {{ category.budget }}<br/>
    Current budget: {{ currentBudget }}

    <ng-template [ngIf]="calculateBudgetProgress() >= 90" [ngIfElse]="green">
      <mat-progress-bar color="warn"  mode="determinate" value="{{calculateBudgetProgress()}}"></mat-progress-bar>
    </ng-template>
    <ng-template #green>
      <mat-progress-bar  mode="determinate" value="{{calculateBudgetProgress()}}"></mat-progress-bar>
    </ng-template>

    <span *ngIf="category.endDate">
      <br/>
      End date: {{ category.endDate.toDate() | date:'mediumDate' }}
    </span>
  </mat-card-subtitle>
  <mat-card-content>
    <app-transaction-list [transactions]="transactions"  [checkbook]="checkbook | async" [category]="category" ></app-transaction-list>
  </mat-card-content>
  <mat-card-actions>
    <button mat-button (click)="editCategory()">Edit</button>
    <button mat-button (click)="deleteCategory()">Delete</button>
    <button mat-button (click)="openAddTransactionDialog()">Add transaction</button>
  </mat-card-actions>
</mat-card>
